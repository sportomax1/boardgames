<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, viewport-fit=cover">
    <title>Hot Games - Boardgames Hub</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: #f7f7fa;
            color: #222;
        }
        .container {
            max-width: 430px;
            margin: 0 auto;
            padding: 2em 1em 1em 1em;
            box-sizing: border-box;
            min-height: 100vh;
            padding-bottom: env(safe-area-inset-bottom);
        }
        h1 {
            font-size: 1.7em;
            margin-bottom: 1em;
            text-align: center;
        }
        .hot-list {
            margin-top: 1em;
        }
        .hot-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 12px #0001;
            margin-bottom: 1em;
            padding: 1em 1.2em;
            display: flex;
            align-items: center;
        }
        .hot-img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 1em;
            background: #eee;
        }
        .hot-info {
            flex: 1;
        }
        .hot-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 0.2em;
        }
        .hot-rank {
            font-size: 0.95em;
            color: #a020f0;
            font-weight: 600;
        }
        .hot-link {
            color: #1976d2;
            text-decoration: none;
            font-size: 0.98em;
        }
    </style>
</head>
<body>
    <a id="homeBtn" href="index.html" style="position:fixed; left:calc(50vw - 215px); top:24px; z-index:999; background:#1976d2; color:#fff; border:none; border-radius:50%; width:54px; height:54px; font-size:2em; box-shadow:0 2px 12px #0002; display:flex; align-items:center; justify-content:center; max-width:430px; text-decoration:none;">
        <span style="display:flex; align-items:center; justify-content:center; width:100%; height:100%;"><svg width="32" height="32" viewBox="0 0 32 32" style="display:block; margin:auto;" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="16" cy="16" r="16" fill="#1976d2"/><path d="M20 10L12 16L20 22" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
    </a>
    <button id="scrollTopBtn" style="position:fixed; right:calc(50vw - 215px); bottom:calc(24px + env(safe-area-inset-bottom)); z-index:999; background:#1976d2; color:#fff; border:none; border-radius:50%; width:54px; height:54px; font-size:2em; box-shadow:0 2px 12px #0002; display:none; align-items:center; justify-content:center; max-width:430px;">&#8679;</button>
    <button id="scrollBottomBtn" style="position:fixed; left:calc(50vw - 215px); bottom:calc(24px + env(safe-area-inset-bottom)); z-index:999; background:#1976d2; color:#fff; border:none; border-radius:50%; width:54px; height:54px; font-size:2em; box-shadow:0 2px 12px #0002; display:none; align-items:center; justify-content:center; max-width:430px;">&#8681;</button>
    <div class="container">
        <h1>Hot Board Games</h1>
        <div id="hotList" class="hot-list">
            <div style="text-align:center; color:#888; font-size:1.1em;">Loading hot games...</div>
        </div>
    </div>
    <script>
    // Up/Down arrow logic
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    const scrollBottomBtn = document.getElementById('scrollBottomBtn');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
            scrollTopBtn.style.display = 'flex';
        } else {
            scrollTopBtn.style.display = 'none';
        }
        if ((window.innerHeight + window.scrollY) < document.body.offsetHeight - 300) {
            scrollBottomBtn.style.display = 'flex';
        } else {
            scrollBottomBtn.style.display = 'none';
        }
    });
    scrollTopBtn.onclick = () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };
    scrollBottomBtn.onclick = () => {
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    };
    async function fetchHotGames() {
        const hotList = document.getElementById('hotList');
        try {
            const resp = await fetch('https://boardgamegeek.com/xmlapi2/hot?type=boardgame');
            if (!resp.ok) throw new Error('Failed to fetch hot games');
            const xml = await resp.text();
            const parser = new window.DOMParser();
            const doc = parser.parseFromString(xml, 'text/xml');
            const items = Array.from(doc.querySelectorAll('item'));
            if (items.length === 0) {
                hotList.innerHTML = '<div style="text-align:center; color:#888;">No hot games found.</div>';
                return;
            }
            hotList.innerHTML = '';
            items.forEach(item => {
                const rank = item.getAttribute('rank');
                const id = item.getAttribute('id');
                const name = item.querySelector('name')?.getAttribute('value') || 'Unknown';
                const year = item.querySelector('yearpublished')?.getAttribute('value') || '';
                const thumbnail = item.querySelector('thumbnail')?.getAttribute('value') || '';
                const bggLink = `https://boardgamegeek.com/boardgame/${id}`;
                const card = document.createElement('div');
                card.className = 'hot-card';
                card.style.cursor = 'pointer';
                card.onclick = () => { window.open(bggLink, '_blank'); };
                card.innerHTML = `
                    <img class='hot-img' src='${thumbnail}' alt='${name}'>
                    <div class='hot-info'>
                        <div class='hot-title'>${name} ${year ? `<span style='color:#888; font-size:0.95em;'>(${year})</span>` : ''}</div>
                        <div class='hot-rank'>Rank #${rank}</div>
                        <a class='hot-link' href='${bggLink}' target='_blank' onclick='event.stopPropagation();'>View on BGG</a>
                    </div>
                `;
                hotList.appendChild(card);
            });
        } catch (e) {
            hotList.innerHTML = `<div style='text-align:center; color:#c00;'>Error: ${e.message}</div>`;
        }
    }
    fetchHotGames();
    </script>
</body>
</html>
